# 📊 Interactive Stock Price Analysis Tool

一個功能強大的互動式股票技術分析工具，支援多重移動平均線、布林通道、費波那契回調線和成交量分析。

## ✨ 主要功能

### 📈 技術指標
- **5 條移動平均線 (MA)**
  - MA10（10日）- 短期趨勢
  - MA20（20日）- 短中期趨勢
  - MA50（50日）- 中期趨勢
  - MA60（60日）- 中長期趨勢
  - MA200（200日）- 長期趨勢

- **布林通道 (Bollinger Bands)**
  - 20日期間，2倍標準差
  - 上軌、中軌、下軌
  - 半透明填充區域
  - 用於判斷超買超賣

- **互動式費波那契回調線**
  - 手動選擇高點和低點
  - 即時預覽功能
  - 7個關鍵支撐/壓力位：0%, 23.6%, 38.2%, 50%, 61.8%⭐, 78.6%, 100%
  - 61.8% 黃金比例特別標示

- **成交量柱狀圖**
  - 🔴 紅色柱 = 上漲日
  - 🟢 綠色柱 = 下跌日
  - 自動格式化（M = 百萬，K = 千）

### 🎯 互動功能
- **圖例點擊切換**: 點擊圖例項目顯示/隱藏對應線條
- **費波那契工具**: 
  - 點擊圖例中的 "📐 Fibonacci Tool"
  - 選擇第一個點（高點或低點）
  - 移動滑鼠即時預覽
  - 點擊第二個點確認
- **鍵盤快捷鍵**: 
  - `ESC` - 取消費波那契工具或清除已繪製的線條

---

## 🚀 安裝說明

### 系統需求
- Python 3.7 或更高版本
- Windows / macOS / Linux

### 安裝步驟

1. **安裝必要套件**
```bash
pip install yfinance matplotlib pandas numpy
```

2. **下載程式**
將 `stock-price-track.py` 下載到您的電腦

3. **執行程式**
```bash
python stock-price-track.py
```

---

## 📖 使用指南

### 1. 啟動程式

```bash
python stock-price-track.py
```

### 2. 輸入股票代號

程式會提示您輸入股票代號（多檔用逗號分隔）：

```
Enter US stock symbols separated by comma (e.g., AAPL,MSFT,TSLA): AAPL,TSLA
```

支援的格式：
- 單一股票：`AAPL`
- 多檔股票：`AAPL,MSFT,TSLA,GOOGL`

### 3. 查看圖表

圖表會自動顯示，包含：
- **上方**: 股價走勢 + 技術指標
- **下方**: 成交量柱狀圖

### 4. 互動操作

#### 📌 切換技術指標
1. 點擊**圖例中的項目**（左上角）
2. 線條會顯示/隱藏
3. 可以同時顯示多條線進行比較

#### 📐 使用費波那契工具
1. 點擊圖例中的 **"📐 Fibonacci Tool (Click to Draw)"**
2. 圖表上方會顯示提示：「Step 1: Click on the FIRST point」
3. 在圖表上點擊**第一個點**（高點或低點）
   - 會出現 🔴 紅色標記
4. **移動滑鼠**查看即時預覽
   - 費波那契線條會跟隨滑鼠移動
5. 點擊**第二個點**確認
   - 會出現 🔵 藍色標記
   - 顯示最終的費波那契回調線
6. 按 `ESC` 可隨時取消或清除

#### ⌨️ 鍵盤快捷鍵
- **ESC**: 
  - 取消費波那契繪製過程
  - 清除已完成的費波那契線條

---

## 📊 圖表說明

### 技術指標顏色
| 指標 | 顏色 | 線型 | 說明 |
|------|------|------|------|
| 股價 | 黑色 | 實線 | 收盤價 |
| MA10 | 紅色 | 實線 | 10日移動平均 |
| MA20 | 青色 | 虛線 | 20日移動平均 |
| MA50 | 藍色 | 點劃線 | 50日移動平均 |
| MA60 | 橘色 | 點線 | 60日移動平均 |
| MA200 | 紫色 | 點劃線 | 200日移動平均 |
| 布林通道 | 粉紅色 | 虛線 | 上下軌 + 填充 |

### 費波那契顏色
| 比例 | 顏色 | 說明 |
|------|------|------|
| 0% | 灰色 | 期間高點 |
| 23.6% | 紫色 | 支撐/壓力位 |
| 38.2% | 藍色 | 支撐/壓力位 |
| 50% | 綠色 | 中間價位 |
| **61.8%** ⭐ | **橙色** | **黃金比例** |
| 78.6% | 紅色 | 支撐/壓力位 |
| 100% | 灰色 | 期間低點 |

### 成交量顏色
- 🔴 **紅色**: 上漲日（收盤價 ≥ 前一日收盤價）
- 🟢 **綠色**: 下跌日（收盤價 < 前一日收盤價）
- ⚪ **灰色**: 第一日（無法比較）

---

## 💡 使用技巧

### 1. 趨勢判斷
- **股價在 MA20 上方** → 短期上漲趨勢
- **股價在 MA50 上方** → 中期上漲趨勢
- **股價在 MA200 上方** → 長期上漲趨勢
- **黃金交叉**: 短期MA向上穿越長期MA → 買入訊號
- **死亡交叉**: 短期MA向下穿越長期MA → 賣出訊號

### 2. 布林通道應用
- **股價觸及上軌** → 可能超買，注意回調
- **股價觸及下軌** → 可能超賣，注意反彈
- **通道收窄** → 波動率降低，可能醞釀大行情
- **通道擴張** → 波動率增加

### 3. 費波那契應用
- 選擇**明顯的高點和低點**效果最好
- **61.8% 黃金比例**最常被關注
- **多個費波那契水平重疊** → 強力支撐/壓力位
- 股價接近費波那契線時容易反彈或回調

### 4. 成交量分析
- **放量上漲** → 買盤強勁，上漲動能足
- **放量下跌** → 賣壓沉重，下跌動能足
- **縮量上漲** → 上漲力度弱，注意回調
- **縮量下跌** → 下跌力度弱，可能築底

---

## 📈 統計資訊說明

程式會在終端機顯示以下分析結果：

```
📈 AAPL Analysis Results:
   Latest Price: $435.50              # 最新收盤價
   6-Month Return: +15.3%             # 6個月報酬率
   Average Price: $380.25             # 平均價格
   Period High: $475.00               # 期間最高價
   Period Low: $195.00                # 期間最低價
   Price Range: 143.6%                # 價格區間
   Annualized Volatility: 35.2%       # 年化波動率
   Maximum Drawdown: -25.5%           # 最大回撤

📊 Moving Averages (Latest Values):
   MA10: $430.15 (+1.2% from current)  # 與當前價格的差距
   MA20: $425.80 (+2.3% from current)
   ...

   Technical Trend: 📈 Strong (Price well above MA20)  # 技術趨勢判斷
```

---

## ⚠️ 注意事項

### 資料來源
- 資料來自 **Yahoo Finance**
- 免費使用，無需 API Key
- 資料可能有輕微延遲

### 使用限制
- 需要網路連線下載資料
- 分析期間固定為 **6 個月顯示**（抓取 15 個月資料以完整顯示 MA200）
- 費波那契工具一次只能繪製一組線條（可重新繪製）

### 建議配置
- **螢幕解析度**: 1920x1080 或更高
- **圖表大小**: 預設 12x9 英吋，可在程式中調整
- **同時分析股票數**: 建議一次不超過 5 檔，避免視窗過多

---

## 🐛 常見問題

### Q1: 無法顯示中文？
**A**: 程式已使用英文界面，不受中文字體影響。

### Q2: 股票代號無效？
**A**: 
- 確認使用**美股代號**（如 AAPL, MSFT）
- 台股需使用 `.TW` 後綴（如 2330.TW）
- 檢查拼寫是否正確

### Q3: 布林通道/費波那契不顯示？
**A**:
- **布林通道**: 點擊圖例中的 "Bollinger Bands"
- **費波那契**: 點擊圖例中的 "📐 Fibonacci Tool"，然後在圖表上選點

### Q4: 圖表顯示不完整？
**A**: 
- 調整視窗大小
- 檢查是否有其他視窗遮擋
- 重新執行程式

### Q5: 費波那契點擊沒反應？
**A**:
1. 確認已點擊圖例啟動工具（看到提示文字）
2. 必須點擊在**上方價格圖**範圍內
3. 按 `ESC` 重置後重試

### Q6: 成交量柱子沒填滿？
**A**: 這是正常的！週末和假日沒有交易，所以沒有柱子。

---

## 🔧 進階設定

### 修改分析期間
在程式中找到以下行並修改：
```python
data = yf.download(symbol, period="15mo", progress=False)  # 抓取資料期間
data_6m = data.tail(130)  # 顯示天數（130天 ≈ 6個月）
```

### 調整圖表大小
```python
fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(12, 9),  # 寬x高（英吋）
```

### 修改布林通道參數
```python
BOLLINGER_PERIOD = 20  # 期間（天數）
BOLLINGER_STD = 2      # 標準差倍數
```

### 自訂移動平均線
```python
MA_PERIODS = {
    'MA10': (10, '#FF6B6B', '-'),   # (期間, 顏色, 線型)
    'MA20': (20, '#4ECDC4', '--'),
    # 可新增其他期間
}
```

---

## 📝 版本資訊

**Version**: 1.0.0  
**Last Updated**: 2025-10-17  
**Python Version**: 3.7+  

### 功能清單
- ✅ 5條移動平均線（MA10/20/50/60/200）
- ✅ 布林通道（上中下軌 + 填充）
- ✅ 互動式費波那契回調線
- ✅ 成交量柱狀圖（漲跌分色）
- ✅ 圖例點擊切換顯示
- ✅ 即時預覽功能
- ✅ 詳細統計分析
- ✅ 多股票批次分析

---

## 📄 授權

本專案僅供**教育和個人研究**使用。

**免責聲明**:
- 本工具提供的資訊僅供參考
- 不構成任何投資建議
- 投資有風險，請謹慎評估

---

## 🤝 支援

如有問題或建議，歡迎聯繫或提交 Issue。

### 相關資源
- [Yahoo Finance](https://finance.yahoo.com/)
- [Matplotlib 文檔](https://matplotlib.org/)
- [yfinance 文檔](https://github.com/ranaroussi/yfinance)

---

## 🎉 開始使用

```bash
# 1. 安裝套件
pip install yfinance matplotlib pandas numpy

# 2. 執行程式
python stock-price-track.py

# 3. 輸入股票代號
Enter US stock symbols: AAPL,TSLA

# 4. 享受分析！
```

**Happy Trading! 📈💰**